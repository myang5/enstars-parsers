!function(e){function t(t){for(var r,c,l=t[0],i=t[1],u=t[2],s=0,m=[];s<l.length;s++)c=l[s],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(f&&f(t);m.length;)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var i=n[l];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={0:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var f=i;o.push([212,1]),n()}({179:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(171),c=n(174),l=n(123),i=n(31),u="index",f="prev-url",s="prev-title",m="next-url",p="next-title",d={MashiroFormatter:"mashiro-formatter",JayFormatter:"jay-formatter"},v=d.MashiroFormatter,b=(n(179),Object.values(d));function h(){var e=Object(i.g)(),t=Object(i.f)(),n=e.pathname.split("/")[1],r=n||v;return a.a.createElement("header",null,a.a.createElement("h1",null,a.a.createElement(l.b,{className:"star-link",to:"/"},"ENSTARS PARSERS")),a.a.createElement("ul",{id:"navbar"},a.a.createElement("li",null,a.a.createElement("select",{value:r,onChange:function(e){var n=e.target.value;t.push("/".concat(n))}},b.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})))),a.a.createElement("li",null,a.a.createElement("a",{className:"star-link",target:"_blank",rel:"noreferrer",href:"https://twitter.com/gayandasleep"},"CONTACT")),a.a.createElement("li",null,a.a.createElement("a",{className:"star-link",target:"_blank",rel:"noreferrer",href:"https://github.com/myang5/enstars-parsers/issues"},"REPORT ISSUE")),a.a.createElement("li",null,a.a.createElement("a",{className:"star-link",target:"_blank",rel:"noreferrer",href:"https://github.com/myang5/enstars-parsers"},"GITHUB"))))}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=Object(r.createContext)(),O=function(){return Object(r.useContext)(E)},w=function(e){var t=e.children,n=y(Object(r.useState)(JSON.parse(localStorage.getItem("nav"))||{}),2),o={nav:n[0],setNav:n[1],inputRef:Object(r.useRef)(null)};return a.a.createElement(E.Provider,{value:o},t)};n(184);function j(e){var t=e.tabs,n=e.clicked,r=e.onClick;return a.a.createElement("div",{className:"tab-menu"},t.map((function(e){return a.a.createElement("button",{type:"button",key:e,className:"tablink".concat(n===e?" active":""),onClick:function(){return r(e)}},e)})))}n(185);var S=n(124),N=n.n(S);function x(e){var t=e.clicked,n=e.value,r=e.children;return a.a.createElement("div",{className:N()("tab-content","tab-content--".concat(n.replace(" ","-").toLowerCase()),{"tab-content--active":t===n})},r)}var C=n(125),A=n.n(C),k=n(146),T=n(148),R=n(157),I=n(154),P=n(155),_=n(147),M=n(152);function D(){var e=O().inputRef,t={plugins:[T.a,R.a,I.a,P.a,_.a,M.a],toolbar:["bold","italic","link","|","undo","redo"]};return Object(r.useEffect)((function(){try{e.current.editor.editing.view.change((function(t){t.setAttribute("spellcheck","false",e.current.editor.editing.view.document.getRoot())}))}catch(e){}return function(){}}),[]),a.a.createElement(A.a,{editor:k.a,config:t,data:"\n<p>Location: Pool</p>\n<p>CW: Death threats</p>\n<p>Narration: Time: Several minutes later</p>\n<p>Narration: Several minutes later</p>\n<p>Image: /img/es/eventstory/meteorimpact/firsthalfch2.jpg</p>\n<p>Natsume, hidden: HoweVER. Within a game where everything is proGRAMMED, everything works with much simpler loGIC.</p>\n<p>In this world where everything obeys my every comMAND, I will reign as god and control everyTHING. I'll make sure they can live in peace and joy within this miniature <hold>garDEN—</hold></p>\n<p><th>And I will give everyone an equal opportunity to experience their own happily ever afTER.</th></p>\n<p><spell>—Welcome to paradise, my <hold>idols♪</hold></spell></p>\n<p>Tsumugi: Um, but, no matter how you look at it, I'm pretty sure this world is a dystopia, right?</p>\n",ref:e})}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(){var e=O(),t=e.nav,n=e.setNav,r=function(e){var r=e.target,a=r.id,o=r.value;n(F(F({},t),{},L({},a,o)))};return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,'Links for the navigation at the end of each chapter page. "Title" refers to the text that appears when hovering over each navigation button.'),a.a.createElement("div",{className:"row"},a.a.createElement("label",{className:"row__spacer",htmlFor:u},"Index URL"),a.a.createElement("input",{type:"text",id:u,value:t[u],onChange:r,placeholder:"Ex. /dead_end_land"})),a.a.createElement("div",{className:"row"},a.a.createElement("label",{className:"row__spacer",htmlFor:f},"Prev URL"),a.a.createElement("input",{type:"text",id:f,value:t[f],onChange:r,placeholder:"Ex. /dead_end_land/6"})),a.a.createElement("div",{className:"row"},a.a.createElement("label",{className:"row__spacer",htmlFor:s},"Prev Title"),a.a.createElement("input",{type:"text",id:s,value:t[s],onChange:r,placeholder:"Ex. Previous Chapter: Dead End Street (6)"})),a.a.createElement("div",{className:"row"},a.a.createElement("label",{className:"row__spacer",htmlFor:m},"Next URL"),a.a.createElement("input",{type:"text",id:m,value:t[m],onChange:r,placeholder:"Ex. /dead_end_land/8"})),a.a.createElement("div",{className:"row"},a.a.createElement("label",{className:"row__spacer",htmlFor:p},"Next Title"),a.a.createElement("input",{type:"text",id:p,value:t[p],onChange:r,placeholder:"Ex. Next Chapter: Epilogue (1)"})))};function W(e){var t=e.querySelectorAll("br");if(t.length>0){for(var n=t[0].parentNode,r=n.parentNode,a=0;a<t.length;a++){var o=new Range;if(o.setStart(t[a].parentNode,0),o.setEndBefore(t[a]),!o.collapsed){var c=document.createElement(n.tagName.toLowerCase());c.append(o.extractContents()),r.insertBefore(c,n)}t[a].remove()}0===n.innerHTML.length&&n.remove()}return e}function B(e){return(new DOMParser).parseFromString(e,"text/html")}var $=n(121);function q(e){return Z(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||H(e)||V()}function G(e,t){return Z(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||H(e,t)||V()}function V(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function H(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e){if(Array.isArray(e))return e}var z=function(e){return e.toUpperCase().startsWith("LOCATION:")},K=function(e){return e.toUpperCase().startsWith("CW:")},Q=function(e){return e.toUpperCase().startsWith("IMAGE:")},Y=function(e){return e.match(/^\w*:(.*)/)[1].trim()},ee=function(e){return e.toUpperCase().startsWith("NARRATION:")},te=function(e){var t=e.match(/^\w*:( ?\w*?):(.*)/);return t?{label:t[1].trim(),value:t[2].trim()}:{value:Y(e)}},ne=function(e){if(Object($.chain)(e).split(":").map((function(e){return e.trim()})).compact().value().length<2)return!1;var t=e.split(":")[0];return Object($.inRange)(Object($.chain)(t).split(",").map((function(e){return e.trim()})).compact().value().length,1,3)},re=function(e){var t=q(e.split(":")),n=t[0],r=t.slice(1);return[Object($.chain)(n).split(",").map((function(e){return e.trim()})).join(" ").value(),r.join(":").trim()]};function ae(e){var t,n,r=e.inputData,a=e.nav,o=oe(),c=W(B(r));t="nav",0===(n=a).length?localStorage.removeItem(t):JSON.stringify(n)!==localStorage.getItem(t)&&localStorage.setItem(t,JSON.stringify(n));for(var l=c.querySelectorAll("p"),i="",d=function(e){var t="";return function(n){var r=n.textContent.replace(/&nbsp;/g," ").trim();if(!r)return"";if(Q(r))return e.image(Y(r));if(z(r))return e.noteLocation(Y(r));if(K(r))return e.noteCw(Y(r));if(ee(r))return e.noteNarration(te(r));if(ne(r)){var a=G(re(r),2),o=a[0],c=a[1];if(t===o)return e.dialogue(c);var l="";return t&&(l+=e.endBubble()),t=o,l+=e.startBubble(o),l+=e.dialogue(c,!0)}return t?e.dialogue(r):""}}(o),v=0;v<l.length;v++)i+=d(l[v]);return i+=o.endBubble(),i+=function(e){var t="<div toc>\n";e[f]&&(t+="{% btn ".concat(e[f],",, arrow-left, ").concat(e[s]," %}\n"));t+="{% btn ".concat(e[u],",, star, Index %}\n"),e[m]&&(t+="{% btn ".concat(e[m],",, arrow-right, ").concat(e[p]," %}\n"));return t+="</div>\n"}(a)}var oe=function(){var e={startBubble:function(e){return"{% bubble ".concat(e," %}\n")},endBubble:function(){return"{% endbubble %}\n\n"},dialogue:function(e,t){return"".concat(t?"":"\n","  ").concat(e,"\n")},noteLocation:function(e){return"{% note location %}\n**Location:** ".concat(e,"\n{% endnote %}\n\n")},noteCw:function(e){return"{% note cw %}\n**Content Warning:** ".concat(e,"\n{% endnote %}\n\n")},noteNarration:function(e){var t=e.label,n=e.value;return"{% note narration %}\n".concat(t?"**".concat(t,":** "):"").concat(n,"\n{% endnote %}\n\n")},image:function(e){return"{% img ".concat(e," %}\n\n")}};return e};n(208);function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie={TEXT:"Text",NAV:"Story Nav"},ue=Object.values(ie);function fe(){var e=Object(r.useRef)(null);return a.a.createElement(w,null,a.a.createElement("div",{className:"main-page mashiro-formatter"},a.a.createElement(se,null),a.a.createElement(de,{outputRef:e}),a.a.createElement("textarea",{className:"output",ref:e,spellCheck:!1})))}var se=function(){var e=ce(Object(r.useState)(ie.TEXT),2),t=e[0],n=e[1];return a.a.createElement("div",{className:"input"},a.a.createElement(j,{tabs:ue,clicked:t,onClick:n}),a.a.createElement(x,{value:ie.TEXT,clicked:t},a.a.createElement(D,null)),a.a.createElement(x,{value:ie.NAV,clicked:t},a.a.createElement(J,null)))},me="Copy Output",pe="Copied",de=function(e){var t=e.outputRef,n=O(),o=n.nav,c=n.inputRef,l=ce(Object(r.useState)(me),2),i=l[0],u=l[1];return a.a.createElement("div",{className:"actions"},a.a.createElement("button",{type:"button",onClick:function(){u(me);var e=ae({inputData:c.current.editor.getData(),nav:o});t.current.value=e},id:"convert-button"},"CONVERT"),a.a.createElement("button",{type:"button",onClick:function(){t.current.select(),document.execCommand("copy"),u(pe)},id:"copy-button"},i))};n(209);function ve(e){var t=e.clickedTab,n=e.value,r=e.children;return a.a.createElement("div",{className:N()("tab-content","tab-content--".concat(n.replace(" ","-").toLowerCase()),{"tab-content--active":t===n})},r)}var be=Object(r.createContext)(),he=function(e){var t=e.children,n={inputRef:Object(r.useRef)(null)};return a.a.createElement(be.Provider,{value:n},t)},ye=function(){return Object(r.useContext)(be)};function ge(){var e=ye().inputRef,t={plugins:[T.a,R.a,I.a,P.a,_.a,M.a],toolbar:["bold","italic","link","|","undo","redo"]};return Object(r.useEffect)((function(){console.log("JayFormatter editor useEffect");try{e.current.editor.editing.view.change((function(t){t.setAttribute("spellcheck","false",e.current.editor.editing.view.document.getRoot())}))}catch(e){}return function(){}}),[]),a.a.createElement(A.a,{editor:k.a,config:t,data:"\n<p>Jun: normal text '''bold text''' text with: colon ''italic text''</p>\n<p>'''bold text''' '''more bold text''' ''italic text'' ''more italic text''</p>\n",ref:e})}var Ee=function(e){return e.replace(/'''(.*?)'''/g,"<b>$1</b>")},Oe=function(e){return e.replace(/''(.*?)''/g,"<i>$1</i>")},we=function(e){return e.replace(/^([A-Z]\w*:)/g,"<b>$1</b>")};function je(e){for(var t=W(B(e.inputData)).querySelectorAll("p"),n=function(e){var t=e.textContent.replace(/&nbsp;/g," ").trim();return t?(t=Ee(t),t=Oe(t),(t=we(t))+"\n\n"):""},r="",a=0;a<t.length;a++)r+=n(t[a]);return r}n(210);function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(){var e=Object(r.useRef)(null);return a.a.createElement(he,null,a.a.createElement("div",{className:"main-page jay-formatter"},a.a.createElement(Ce,null),a.a.createElement(Te,{outputRef:e}),a.a.createElement("textarea",{className:"output",ref:e,spellCheck:!1})))}var Ce=function(){return a.a.createElement("div",{className:"input"},a.a.createElement(ve,{value:"Text",clickedTab:"Text"},a.a.createElement(ge,null)))},Ae="Copy Output",ke="Copied",Te=function(e){var t=e.outputRef,n=ye().inputRef,o=Se(Object(r.useState)(Ae),2),c=o[0],l=o[1];return a.a.createElement("div",{className:"actions"},a.a.createElement("button",{type:"button",onClick:function(){l(Ae);var e=je({inputData:n.current.editor.getData()});t.current.value=e},id:"convert-button"},"CONVERT"),a.a.createElement("button",{type:"button",onClick:function(){t.current.select(),document.execCommand("copy"),l(ke)},id:"copy-button"},c))};n(211);var Re=Object(c.hot)((function(){return a.a.createElement(l.a,{basename:"/"},a.a.createElement(h,null),a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/".concat(d.MashiroFormatter)},a.a.createElement(fe,null)),a.a.createElement(i.a,{path:"/".concat(d.JayFormatter)},a.a.createElement(xe,null)),a.a.createElement(i.a,{exact:!0,path:"/"},a.a.createElement(fe,null))))}));Object(o.render)(a.a.createElement(Re,null),document.querySelector("#root"))}});